# ===== 基础（参考你仓库里的 clash.txt 风格）=====
mixed-port: 7890
allow-lan: true
bind-address: "*"
mode: rule
log-level: info
external-controller: 127.0.0.1:9090

dns:
  enable: true
  ipv6: false
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  use-hosts: true
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback:
    - https://doh-pure.onedns.net/dns-query
    - https://ada.openbld.net/dns-query
    - https://223.5.5.5/dns-query
    - https://223.6.6.6/dns-query
  fallback-filter:
    geoip: true
    ipcidr:
      - 240.0.0.0/4
      - 0.0.0.0/32

# ===== 关键：模板不包含任何节点/订阅 =====
proxies: []

# ===== 只按 ini 的 custom_proxy_group 名字建组（不做自动测速/故障转移/地区自动）=====
proxy-groups:
  - name: "$app_name"
    type: select
    proxies:
      - "节点选择"
      - "国外"
      - "国内"
      - "DIRECT"
      - "REJECT"

  - name: "节点选择"
    type: select
    proxies:
      - "DIRECT"
      - "REJECT"
      # xboard 注入节点后会显示在这里（模板本身不写任何节点）

  - name: "国外"
    type: select
    proxies: ["节点选择", "DIRECT", "REJECT"]

  - name: "国内"
    type: select
    proxies: ["DIRECT", "节点选择", "REJECT"]

  - name: "AI"
    type: select
    proxies: ["节点选择", "DIRECT", "REJECT"]

  - name: "流媒体"
    type: select
    proxies: ["节点选择", "DIRECT", "REJECT"]

  - name: "TikTok"
    type: select
    proxies: ["节点选择", "DIRECT", "REJECT"]

  - name: "Google"
    type: select
    proxies: ["节点选择", "DIRECT", "REJECT"]

  - name: "Microsoft"
    type: select
    proxies: ["节点选择", "DIRECT", "REJECT"]

  - name: "Emby"
    type: select
    proxies: ["节点选择", "DIRECT", "REJECT"]

  - name: "国外媒体"
    type: select
    proxies: ["节点选择", "DIRECT", "REJECT"]

  - name: "Steam"
    type: select
    proxies: ["DIRECT", "节点选择", "REJECT"]

  - name: "Game"
    type: select
    proxies: ["DIRECT", "节点选择", "REJECT"]

  - name: "测试专用"
    type: select
    proxies: ["节点选择", "DIRECT", "REJECT"]

  - name: "Block"
    type: select
    proxies: ["REJECT", "DIRECT"]

# ===== rule-providers：按你 ini 的 ruleset URL 映射（模板短，不展开规则）=====
rule-providers:
  Claude:
    type: http
    behavior: classical
    path: ./ruleset/Claude.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Claude/Claude.list"
    interval: 86400

  MetaAi:
    type: http
    behavior: classical
    path: ./ruleset/MetaAi.list
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/MetaAi.list"
    interval: 86400

  Perplexity:
    type: http
    behavior: classical
    path: ./ruleset/Perplexity.list
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Perplexity.list"
    interval: 86400

  AI_All:
    type: http
    behavior: classical
    path: ./ruleset/AI_All.list
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/AI.list"
    interval: 86400

  TikTok:
    type: http
    behavior: classical
    path: ./ruleset/TikTok.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/TikTok/TikTok.list"
    interval: 86400

  Google:
    type: http
    behavior: classical
    path: ./ruleset/Google.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Google/Google.list"
    interval: 86400

  Microsoft:
    type: http
    behavior: classical
    path: ./ruleset/Microsoft.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Microsoft/Microsoft.list"
    interval: 86400

  Disney:
    type: http
    behavior: classical
    path: ./ruleset/Disney.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Disney/Disney.list"
    interval: 86400

  Netflix:
    type: http
    behavior: classical
    path: ./ruleset/Netflix.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Netflix/Netflix.list"
    interval: 86400

  HBO:
    type: http
    behavior: classical
    path: ./ruleset/HBO.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/HBO/HBO.list"
    interval: 86400

  YouTube:
    type: http
    behavior: classical
    path: ./ruleset/YouTube.list
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/YouTube.list"
    interval: 86400

  Twitch:
    type: http
    behavior: classical
    path: ./ruleset/Twitch.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Twitch/Twitch.list"
    interval: 86400

  YouTube_BM7:
    type: http
    behavior: classical
    path: ./ruleset/YouTube_BM7.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.list"
    interval: 86400

  Spotify:
    type: http
    behavior: classical
    path: ./ruleset/Spotify.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Spotify/Spotify.list"
    interval: 86400

  Steam:
    type: http
    behavior: classical
    path: ./ruleset/Steam.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.list"
    interval: 86400

  Epic:
    type: http
    behavior: classical
    path: ./ruleset/Epic.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Epic/Epic.list"
    interval: 86400

  EA:
    type: http
    behavior: classical
    path: ./ruleset/EA.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/EA/EA.list"
    interval: 86400

  Blizzard:
    type: http
    behavior: classical
    path: ./ruleset/Blizzard.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Blizzard/Blizzard.list"
    interval: 86400

  UBI:
    type: http
    behavior: classical
    path: ./ruleset/UBI.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/UBI/UBI.list"
    interval: 86400

  Sony:
    type: http
    behavior: classical
    path: ./ruleset/Sony.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Sony/Sony.list"
    interval: 86400

  Nintendo:
    type: http
    behavior: classical
    path: ./ruleset/Nintendo.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Nintendo/Nintendo.list"
    interval: 86400

  Check:
    type: http
    behavior: classical
    path: ./ruleset/Check.list
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Check.list"
    interval: 86400

  Emby:
    type: http
    behavior: classical
    path: ./ruleset/Emby.list
    url: "https://raw.githubusercontent.com/Antilovelll/clash/refs/heads/main/emby.list"
    interval: 86400

  Out:
    type: http
    behavior: classical
    path: ./ruleset/Out.list
    url: "https://raw.githubusercontent.com/Antilovelll/clash/refs/heads/main/out.list"
    interval: 86400

  Proxy:
    type: http
    behavior: classical
    path: ./ruleset/Proxy.list
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Proxy.list"
    interval: 86400

  Global:
    type: http
    behavior: classical
    path: ./ruleset/Global.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/Global/Global.list"
    interval: 86400

  Block:
    type: http
    behavior: classical
    path: ./ruleset/Block.list
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Block.list"
    interval: 86400

  In:
    type: http
    behavior: classical
    path: ./ruleset/In.list
    url: "https://raw.githubusercontent.com/Antilovelll/clash/refs/heads/main/in.list"
    interval: 86400

  Direct:
    type: http
    behavior: classical
    path: ./ruleset/Direct.list
    url: "https://raw.githubusercontent.com/liandu2024/clash/refs/heads/main/list/Direct.list"
    interval: 86400

  China:
    type: http
    behavior: classical
    path: ./ruleset/China.list
    url: "https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/refs/heads/master/rule/Clash/China/China.list"
    interval: 86400

# ===== 规则：按你 ini 的分流目标组名 =====
rules:
  # AI
  - RULE-SET,Claude,AI
  - RULE-SET,MetaAi,AI
  - RULE-SET,Perplexity,AI
  - RULE-SET,AI_All,AI

  # 平台
  - RULE-SET,TikTok,TikTok
  - RULE-SET,Google,Google
  - RULE-SET,Microsoft,Microsoft

  # 流媒体 / 国外媒体
  - RULE-SET,Disney,流媒体
  - RULE-SET,Netflix,流媒体
  - RULE-SET,HBO,流媒体
  - RULE-SET,YouTube,国外媒体
  - RULE-SET,Twitch,国外媒体
  - RULE-SET,YouTube_BM7,国外媒体
  - RULE-SET,Spotify,国外媒体

  # Steam / Game
  - RULE-SET,Steam,Steam
  - RULE-SET,Epic,Game
  - RULE-SET,EA,Game
  - RULE-SET,Blizzard,Game
  - RULE-SET,UBI,Game
  - RULE-SET,Sony,Game
  - RULE-SET,Nintendo,Game

  # 测试 / Emby / Block
  - RULE-SET,Check,测试专用
  - RULE-SET,Emby,Emby
  - RULE-SET,Block,Block

  # 国内 / 国外（兜底）
  - RULE-SET,In,国内
  - RULE-SET,Direct,国内
  - RULE-SET,China,国内

  - RULE-SET,Out,国外
  - RULE-SET,Proxy,国外
  - RULE-SET,Global,国外

  - GEOIP,CN,DIRECT
  - MATCH,国外
